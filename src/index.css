@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  
  *::-webkit-scrollbar {
    display: none;
  }
  
  html {
    scroll-behavior: smooth;
    height: 100%;
  }

  body {
    min-height: 100%;
    overflow-y: auto;
    overscroll-behavior-y: contain;
    -webkit-overflow-scrolling: touch;
  }
}

@layer utilities {
  .scrollable-content {
    height: 100%;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
    overscroll-behavior-y: contain;
    -webkit-overflow-scrolling: touch;
  }

  .reels-page {
    @apply fixed inset-0 bg-gray-50 dark:bg-gray-900;
    height: 100vh;
    overflow: hidden;
    touch-action: none;
  }

  .reels-content {
    @apply relative;
    height: calc(100vh - 3.5rem);
    margin-top: 3.5rem;
  }

  .reels-container {
    @apply relative mx-auto;
    height: 100%;
    width: min(100vw, calc(100vh * 9/16));
    max-width: 500px;
    overflow: hidden;
  }

  .reels-scroll {
    @apply absolute inset-0;
    height: 100%;
    overflow-y: scroll;
    scroll-snap-type: y mandatory;
    overscroll-behavior-y: contain;
    touch-action: pan-y;
    scroll-behavior: smooth;
  }

  .reel-item {
    @apply relative;
    height: 100%;
    scroll-snap-align: start;
    scroll-snap-stop: always;
    touch-action: manipulation;
    will-change: transform;
  }

  .video-fit {
    @apply absolute inset-0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    pointer-events: none;
  }

  @keyframes sound-wave-1 {
    0%, 100% { height: 3px; }
    50% { height: 12px; }
  }
  
  @keyframes sound-wave-2 {
    0%, 100% { height: 4px; }
    50% { height: 16px; }
  }
  
  @keyframes sound-wave-3 {
    0%, 100% { height: 5px; }
    50% { height: 20px; }
  }
  
  .animate-sound-wave-1 {
    animation: sound-wave-1 0.8s ease-in-out infinite;
  }
  
  .animate-sound-wave-2 {
    animation: sound-wave-2 0.8s ease-in-out infinite 0.2s;
  }
  
  .animate-sound-wave-3 {
    animation: sound-wave-3 0.8s ease-in-out infinite 0.4s;
  }
}

@layer components {
  .reel-overlay {
    @apply absolute inset-0 pointer-events-none;
    background: linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.8) 0%,
      transparent 40%,
      transparent 80%,
      rgba(0, 0, 0, 0.4) 100%
    );
  }

  .mute-button {
    @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
           bg-black/40 rounded-full p-4 backdrop-blur-sm
           opacity-0 transition-opacity duration-300 z-30;
  }

  .mute-button.show {
    @apply opacity-100;
  }

  .reel-controls {
    @apply absolute bottom-0 left-0 right-0 p-4 text-white z-20;
    padding-bottom: calc(1rem + env(safe-area-inset-bottom));
  }

  .reel-header {
    @apply fixed top-0 left-0 right-0 bg-white/90 dark:bg-gray-800/90 
           backdrop-blur-lg z-50 border-b border-gray-200 dark:border-gray-700;
  }
}
